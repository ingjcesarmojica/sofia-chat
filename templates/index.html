<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TusAbogados.com</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            background: white;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: white;
            color: #2c3e50;
            padding: 15px 20px 10px;
            text-align: center;
            position: relative;
            flex-shrink: 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo {
            height: 35px;
            width: auto;
            max-width: 85%;
        }
        
        .avatar-container {
            margin: 0 auto 10px;
            width: 80px;
            height: 80px;
        }
        
        .avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid #e0e0e0;
            background: #e0e0e0 url('https://bidamericas.com/tusabogados/foto.png') center/cover;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 22px;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .subtitle {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 15px;
        }
        
        .status-indicator {
            display: inline-block;
            background: #f1f2f6;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            margin-top: 8px;
            color: #7f8c8d;
        }
        
        .content-container {
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        .tab-content {
            display: none;
            width: 100%;
            height: 100%;
            overflow-y: auto;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .chat-container {
            background: #f8f9fa;
            height: 100%;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 18px;
            max-width: 85%;
            word-wrap: break-word;
            font-size: 14px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background: #3498db;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }
        
        .sofia-message {
            background: white;
            color: #2c3e50;
            border: 1px solid #e0e0e0;
            border-bottom-left-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .typing-indicator {
            display: none;
            padding: 10px 14px;
            background: white;
            border-radius: 18px;
            border: 1px solid #e0e0e0;
            width: fit-content;
            margin-bottom: 12px;
            font-style: italic;
            color: #7f8c8d;
            font-size: 13px;
        }
        
        .input-container {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
            flex-shrink: 0;
        }
        
        input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            outline: none;
            font-size: 15px;
            transition: border-color 0.3s;
        }
        
        input:focus {
            border-color: #3498db;
        }
        
        .send-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        
        .send-btn:hover {
            transform: scale(1.05);
            background: #2980b9;
        }
        
        /* Nuevo bot√≥n "Hablar con Sofia" */
        .talk-button {
            display: block;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            margin: 10px auto 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .talk-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            background: #2980b9;
        }
        
        .talk-button.listening {
            background: #e74c3c;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Galer√≠a de fotos */
        .gallery-container {
            padding: 15px;
            height: 100%;
            overflow-y: auto;
            background: #f8f9fa;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            padding: 10px;
        }
        
        .gallery-item {
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .gallery-item:hover {
            transform: scale(1.03);
        }
        
        .gallery-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Galer√≠a de videos */
        .videos-container {
            padding: 15px;
            height: 100%;
            overflow-y: auto;
            background: #f8f9fa;
        }
        
        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            padding: 10px;
        }
        
        .video-item {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            background: white;
        }
        
        .video-item:hover {
            transform: translateY(-5px);
        }
        
        .video-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            object-fit: cover;
            background: #e0e0e0;
        }
        
        .video-info {
            padding: 10px;
        }
        
        .video-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .video-duration {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        /* Barra de navegaci√≥n inferior */
        .nav-bottom {
            display: flex;
            justify-content: space-around;
            background: white;
            border-top: 1px solid #e0e0e0;
            padding: 10px 0;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 15px;
            color: #7f8c8d;
            font-size: 12px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .nav-item.active {
            color: #3498db;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        /* Responsive para m√≥viles */
        @media (max-width: 480px) {
            .header {
                padding: 15px 15px 10px;
            }
            
            .avatar-container {
                width: 70px;
                height: 70px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .subtitle {
                font-size: 13px;
            }
            
            .message {
                font-size: 13px;
                padding: 8px 12px;
            }
            
            input {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .send-btn {
                width: 40px;
                height: 40px;
            }
            
            .talk-button {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 8px;
            }
            
            .videos-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <img src="https://bidamericas.com/tusabogados/logo.png" alt="Fusa Abogados" class="logo">
            </div>
            
            <div class="header-content">
                <div class="avatar-container">
                    <div class="avatar"></div>
                </div>
                <div class="header-text">
                    <h1>Sofia</h1>
                    <p class="subtitle">Representante de atenci√≥n al cliente</p>
                    <button class="talk-button" id="talkButton" onclick="startVoiceRecognition()">
                         Hablar con Sofia
                    </button>
                    <div class="status-indicator" id="statusIndicator">üî¥ Inicializando...</div>
                </div>
            </div>
        </div>

        <div class="content-container">
            <!-- Contenido del Chat -->
            <div class="tab-content active" id="chatTab">
                <div class="chat-container" id="chatBox">
                    <div class="message sofia-message">
                        ¬°Hola! Soy Sofia, tu representante de atenci√≥n al cliente. ¬øEn qu√© puedo ayudarte hoy?
                    </div>
                    <div class="typing-indicator" id="typingIndicator">
                        Sofia est√° escribiendo...
                    </div>
                </div>

                <div class="input-container">
                    <input type="text" id="userInput" placeholder="Escribe tu mensaje..." onkeypress="handleKeyPress(event)">
                    <button class="send-btn" onclick="sendMessage()">‚Üí</button>
                </div>
            </div>
            
            <!-- Contenido de Fotos -->
            <div class="tab-content" id="photosTab">
                <div class="gallery-container">
                    <div class="gallery-grid" id="photosGrid">
                        <!-- Las im√°genes se cargar√°n din√°micamente -->
                    </div>
                </div>
            </div>
            
            <!-- Contenido de Videos -->
            <div class="tab-content" id="videosTab">
                <div class="videos-container">
                    <div class="videos-grid" id="videosGrid">
                        <!-- Los videos se cargar√°n din√°micamente -->
                    </div>
                </div>
            </div>
        </div>

        <div class="nav-bottom">
            <div class="nav-item active" data-tab="chatTab">
                <div class="nav-icon">üí¨</div>
                <span>Chat</span>
            </div>
            <div class="nav-item" data-tab="photosTab">
                <div class="nav-icon">üñºÔ∏è</div>
                <span>Fotos</span>
            </div>
            <div class="nav-item" data-tab="videosTab">
                <div class="nav-icon">üé¨</div>
                <span>Videos</span>
            </div>
        </div>
    </div>

    <script>
        let voiceSupported = false;
        let recognition = null;
        let selectedVoice = null;
        let voices = [];
        
        // Configuraci√≥n espec√≠fica de voz con tono 1.1 y velocidad 1.1
        const VOICE_SETTINGS = {
            pitch: 1.1,        // Tono de voz: 1.1
            rate: 1.1,         // Velocidad: 1.1
            volume: 1.0,
            preferredLang: 'es-US'  // Idioma: es-US (Espa√±ol Estados Unidos)
        };
        
        // Datos de ejemplo para fotos y videos
        const SAMPLE_PHOTOS = [
            "https://picsum.photos/300/300?random=1",
            "https://picsum.photos/300/300?random=2",
            "https://picsum.photos/300/300?random=3",
            "https://picsum.photos/300/300?random=4",
            "https://picsum.photos/300/300?random=5",
            "https://picsum.photos/300/300?random=6",
            "https://picsum.photos/300/300?random=7",
            "https://picsum.photos/300/300?random=8",
            "https://picsum.photos/300/300?random=9"
        ];
        
        const SAMPLE_VIDEOS = [
            { title: "Asesor√≠a Legal B√°sica", duration: "4:15", thumbnail: "https://picsum.photos/300/200?random=10" },
            { title: "Derechos del Consumidor", duration: "7:32", thumbnail: "https://picsum.photos/300/200?random=11" },
            { title: "Contratos y Acuerdos", duration: "5:48", thumbnail: "https://picsum.photos/300/200?random=12" },
            { title: "Derecho Laboral", duration: "6:21", thumbnail: "https://picsum.photos/300/200?random=13" },
            { title: "Propiedad Intelectual", duration: "8:05", thumbnail: "https://picsum.photos/300/200?random=14" },
            { title: "Derecho de Familia", duration: "9:17", thumbnail: "https://picsum.photos/300/200?random=15" }
        ];
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupTabsNavigation();
            loadGalleryContent();
            loadVideosContent();
            
            // A√±adir funcionalidad a la navegaci√≥n inferior
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
        });
        
        function setupTabsNavigation() {
            // Inicializar tabs
            switchTab('chatTab');
        }
        
        function switchTab(tabId) {
            // Ocultar todos los contenidos de tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar el tab seleccionado
            document.getElementById(tabId).classList.add('active');
            
            // Actualizar navegaci√≥n
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-tab') === tabId) {
                    item.classList.add('active');
                }
            });
        }
        
        function loadGalleryContent() {
            const photosGrid = document.getElementById('photosGrid');
            photosGrid.innerHTML = '';
            
            SAMPLE_PHOTOS.forEach(photoUrl => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                
                const img = document.createElement('img');
                img.src = photoUrl;
                img.alt = "Imagen de muestra";
                img.className = 'gallery-img';
                img.loading = 'lazy';
                
                galleryItem.appendChild(img);
                photosGrid.appendChild(galleryItem);
            });
        }
        
        function loadVideosContent() {
            const videosGrid = document.getElementById('videosGrid');
            videosGrid.innerHTML = '';
            
            SAMPLE_VIDEOS.forEach(video => {
                const videoItem = document.createElement('div');
                videoItem.className = 'video-item';
                
                const thumbnail = document.createElement('div');
                thumbnail.className = 'video-thumbnail';
                thumbnail.style.backgroundImage = `url(${video.thumbnail})`;
                thumbnail.style.backgroundSize = 'cover';
                thumbnail.style.backgroundPosition = 'center';
                
                const videoInfo = document.createElement('div');
                videoInfo.className = 'video-info';
                
                const title = document.createElement('div');
                title.className = 'video-title';
                title.textContent = video.title;
                
                const duration = document.createElement('div');
                duration.className = 'video-duration';
                duration.textContent = video.duration;
                
                videoInfo.appendChild(title);
                videoInfo.appendChild(duration);
                
                videoItem.appendChild(thumbnail);
                videoItem.appendChild(videoInfo);
                
                videosGrid.appendChild(videoItem);
            });
        }

        function initializeApp() {
            checkVoiceSupport();
            loadVoices();
            updateStatus('üîç Buscando voces disponibles...');
            
            // Mensaje de bienvenida con voz
            setTimeout(() => {
                const welcomeText = "Hola, mi nombre es Sofia. Soy tu asistente virtual con una voz latina c√°lida y profesional. ¬øEn qu√© puedo ayudarte hoy?";
                speakText(welcomeText);
            }, 1500);
        }

        function checkVoiceSupport() {
            voiceSupported = ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window);
            const speechSupported = 'speechSynthesis' in window;
            
            if (voiceSupported && speechSupported) {
                updateStatus('üü¢ Sistema de voz activo');
            } else {
                updateStatus('üî¥ Voz no compatible');
                document.getElementById('talkButton').style.display = 'none';
            }
        }
        
        function updateStatus(message) {
            const indicator = document.getElementById('statusIndicator');
            indicator.textContent = message;
            
            if (message.includes('üü¢')) {
                indicator.style.background = 'rgba(46, 204, 113, 0.2)';
                indicator.style.color = '#27ae60';
            } else if (message.includes('üî¥')) {
                indicator.style.background = 'rgba(231, 76, 60, 0.2)';
                indicator.style.color = '#c0392b';
            } else {
                indicator.style.background = 'rgba(255, 193, 7, 0.2)';
                indicator.style.color = '#d35400';
            }
        }

        function loadVoices() {
            // Obtener todas las voces disponibles
            voices = speechSynthesis.getVoices();
            
            if (voices.length === 0) {
                // Si no hay voces, esperar al evento voiceschanged
                speechSynthesis.onvoiceschanged = function() {
                    voices = speechSynthesis.getVoices();
                    selectBestVoice();
                };
                return;
            }
            
            selectBestVoice();
        }
        
        function selectBestVoice() {
            // Buscar espec√≠ficamente voces en espa√±ol de Estados Unidos (es-US)
            const esUSVoices = voices.filter(voice => 
                voice.lang === 'es-US' || voice.lang === 'es-US'
            );
            
            // Si no hay voces es-US, buscar cualquier voz en espa√±ol
            const spanishVoices = voices.filter(voice => 
                voice.lang.includes('es') || voice.lang.includes('ES')
            );
            
            if (esUSVoices.length === 0 && spanishVoices.length === 0) {
                updateStatus('‚ö†Ô∏è No hay voces en espa√±ol');
                return;
            }
            
            // Priorizar voces es-US
            let bestVoice = null;
            
            // Primero buscar voces es-US femeninas
            if (esUSVoices.length > 0) {
                const femaleEsUSVoices = esUSVoices.filter(voice => 
                    voice.name.toLowerCase().includes('female') || 
                    voice.name.toLowerCase().includes('mujer') ||
                    voice.name.toLowerCase().includes('zira') || // Voz femenina en Edge/Windows
                    voice.name.toLowerCase().includes('helena') || // Voz femenina en Chrome
                    voice.name.toLowerCase().includes('monica') // Voz femenina en algunos sistemas
                );
                
                if (femaleEsUSVoices.length > 0) {
                    bestVoice = femaleEsUSVoices[0];
                } else {
                    bestVoice = esUSVoices[0];
                }
                updateStatus('üü¢ Voz es-US encontrada');
            } 
            // Si no hay voces es-US, buscar voces en espa√±ol femeninas
            else if (spanishVoices.length > 0) {
                const femaleSpanishVoices = spanishVoices.filter(voice => 
                    voice.name.toLowerCase().includes('female') || 
                    voice.name.toLowerCase().includes('mujer') ||
                    voice.name.toLowerCase().includes('zira') ||
                    voice.name.toLowerCase().includes('helena') ||
                    voice.name.toLowerCase().includes('monica')
                );
                
                if (femaleSpanishVoices.length > 0) {
                    bestVoice = femaleSpanishVoices[0];
                } else {
                    bestVoice = spanishVoices[0];
                }
                updateStatus('‚ö†Ô∏è Usando voz alternativa');
            }
            
            if (bestVoice) {
                selectedVoice = bestVoice;
                updateStatus('üü¢ Voz ' + bestVoice.name + ' seleccionada');
                console.log('Voz seleccionada:', bestVoice.name, bestVoice.lang);
            } else {
                updateStatus('‚ö†Ô∏è No se pudo seleccionar una voz adecuada');
            }
        }
        
        function speakText(text) {
            if (!selectedVoice) {
                console.error('No hay voz seleccionada para hablar');
                // Intentar cargar voces de nuevo
                loadVoices();
                
                // Si a√∫n no hay voz seleccionada, usar la voz por defecto del sistema
                if (!selectedVoice) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'es-ES';
                    utterance.pitch = VOICE_SETTINGS.pitch;
                    utterance.rate = VOICE_SETTINGS.rate;
                    window.speechSynthesis.speak(utterance);
                    return;
                }
            }
            
            // Detener cualquier s√≠ntesis de voz previa
            window.speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            // Configurar la voz seleccionada con tono 1.1 y velocidad 1.1
            utterance.voice = selectedVoice;
            utterance.lang = selectedVoice.lang || VOICE_SETTINGS.preferredLang;
            utterance.pitch = VOICE_SETTINGS.pitch;
            utterance.rate = VOICE_SETTINGS.rate;
            utterance.volume = VOICE_SETTINGS.volume;
            
            utterance.onstart = function() {
                updateStatus('üéµ Reproduciendo voz...');
            };
            
            utterance.onend = function() {
                updateStatus('üü¢ Voz lista');
            };
            
            utterance.onerror = function(event) {
                console.error('Error de s√≠ntesis de voz:', event);
                updateStatus('‚ùå Error de voz');
                
                // En caso de error, intentar con la voz por defecto
                const fallbackUtterance = new SpeechSynthesisUtterance(text);
                fallbackUtterance.lang = VOICE_SETTINGS.preferredLang;
                fallbackUtterance.pitch = VOICE_SETTINGS.pitch;
                fallbackUtterance.rate = VOICE_SETTINGS.rate;
                window.speechSynthesis.speak(fallbackUtterance);
            };
            
            try {
                window.speechSynthesis.speak(utterance);
            } catch (error) {
                console.error('Error al hablar:', error);
                updateStatus('‚ùå Error al iniciar voz');
                
                // √öltimo intento con configuraci√≥n m√≠nima
                const fallbackUtterance = new SpeechSynthesisUtterance(text);
                fallbackUtterance.lang = VOICE_SETTINGS.preferredLang;
                fallbackUtterance.pitch = VOICE_SETTINGS.pitch;
                fallbackUtterance.rate = VOICE_SETTINGS.rate;
                window.speechSynthesis.speak(fallbackUtterance);
            }
        }

        function startVoiceRecognition() {
            if (!voiceSupported) {
                alert('El reconocimiento de voz no es compatible con tu navegador. Usa Chrome o Edge.');
                return;
            }

            const talkButton = document.getElementById('talkButton');
            
            if (recognition && recognition.isListening) {
                recognition.stop();
                return;
            }

            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'es-ES';
            recognition.continuous = false;
            recognition.interimResults = false;
            
            recognition.onstart = function() {
                talkButton.classList.add('listening');
                recognition.isListening = true;
                updateStatus('üé§ Escuchando...');
            };
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('userInput').value = transcript;
                sendMessage();
                
                talkButton.classList.remove('listening');
                recognition.isListening = false;
                updateStatus('üü¢ Voz lista');
            };
            
            recognition.onerror = function(event) {
                talkButton.classList.remove('listening');
                recognition.isListening = false;
                
                if (event.error !== 'no-speech' && event.error !== 'aborted') {
                    alert('Error en reconocimiento: ' + event.error);
                    updateStatus('‚ùå Error de reconocimiento');
                } else {
                    updateStatus('üü¢ Voz lista');
                }
            };
            
            recognition.onend = function() {
                talkButton.classList.remove('listening');
                recognition.isListening = false;
                updateStatus('üü¢ Voz lista');
            };
            
            try {
                recognition.start();
                updateStatus('üé§ Iniciando reconocimiento...');
            } catch (error) {
                alert('Error al activar el micr√≥fono: ' + error.message);
                updateStatus('‚ùå Error de micr√≥fono');
            }
        }

        function addMessage(message, isUser = false) {
            const chatBox = document.getElementById('chatBox');
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'message user-message' : 'message sofia-message';
            messageDiv.textContent = message;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'block';
            document.getElementById('chatBox').scrollTop = document.getElementById('chatBox').scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                showTypingIndicator();
                
                // Simular respuesta inteligente
                setTimeout(() => {
                    hideTypingIndicator();
                    const response = generateResponse(message);
                    addMessage(response, false);
                    
                    // Hablar con la voz configurada
                    speakText(response);
                }, Math.random() * 1000 + 1500);
            }
        }
        
        function generateResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            if (message.includes('hola') || message.includes('buenos') || message.includes('saludos')) {
                const greetings = [
                    "¬°Hola! Es un placer saludarte. Soy Sofia y estoy aqu√≠ para ayudarte en lo que necesites.",
                    "¬°Buenos d√≠as! Soy Sofia, tu asistente virtual. ¬øC√≥mo puedo hacer que tu d√≠a sea mejor?",
                    "¬°Hola! Me alegra mucho que te pongas en contacto conmigo. ¬øEn qu√© puedo asistirte hoy?"
                ];
                return greetings[Math.floor(Math.random() * greetings.length)];
            }
            
            if (message.includes('gracias') || message.includes('te agradezco')) {
                const thanks = [
                    "¬°De nada! Es un placer poder ayudarte. Estoy aqu√≠ cuando me necesites.",
                    "No hay de qu√© agradecer. Me encanta poder asistirte en lo que requieras.",
                    "¬°Con mucho gusto! Siempre es un placer ayudar a nuestros clientes."
                ];
                return thanks[Math.floor(Math.random() * thanks.length)];
            }
            
            if (message.includes('voz') || message.includes('sonido') || message.includes('hablar')) {
                return "Estoy utilizando mi voz configurada especialmente para una experiencia natural y agradable. ¬øTe gusta c√≥mo sueno?";
            }
            
            // Respuestas generales
            const generalResponses = [
                "Comprendo tu situaci√≥n. D√©jame analizar tu consulta para brindarte la mejor asesor√≠a posible.",
                "Entiendo perfectamente lo que me comentas. Mi objetivo es ayudarte a resolver esto de la manera m√°s eficiente.",
                "Te escucho con atenci√≥n. Cada caso es √∫nico y merece una atenci√≥n personalizada.",
                "Muchas gracias por confiar en nosotros. Estoy aqu√≠ para brindarte toda la informaci√≥n y apoyo que necesites."
            ];
            
            return generalResponses[Math.floor(Math.random() * generalResponses.length)];
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        }
        
        // Cargar voces cuando el usuario interact√∫a por primera vez
        document.addEventListener('click', function() {
            // Solo cargar voces si no se han cargado a√∫n
            if (voices.length === 0) {
                loadVoices();
            }
        }, { once: true });
        
        // Tambi√©n cargar voces cuando la p√°gina est√© completamente cargada
        window.addEventListener('load', function() {
            // Dar tiempo al navegador para cargar las voces
            setTimeout(loadVoices, 1000);
        });
    </script>
</body>
</html>
